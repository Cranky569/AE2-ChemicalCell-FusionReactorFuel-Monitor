-- Peripherals
local mon     = peripheral.find("monitor")
local reactor = peripheral.find("fusionReactorLogicAdapter")

if not mon then error("Monitor not found!") end
if not reactor then error("Fusion Reactor Logic Adapter not found!") end

-- Monitor setup
mon.setTextScale(1)
mon.clear()

-- Function to write text on monitor
local function writeLine(row, text)
    mon.setCursorPos(1, row)
    mon.write(text)
end

-- Main loop
while true do
    mon.clear()
    local row = 1

    -- Try to call getProduction()
    local ok, production = pcall(function() return reactor.getProduction() end)
    if ok then
        writeLine(row, "getProduction(): " .. tostring(production))
    else
        writeLine(row, "getProduction() Error")
    end
    row = row + 2

    -- Dump only methods starting with "get"
    writeLine(row, "Available get-methods:")
    row = row + 1
    for methodName, _ in pairs(reactor) do
        if methodName:sub(1,3) == "get" then
            writeLine(row, methodName)
            row = row + 1
        end
    end

    sleep(5) -- refresh every 5 seconds
end
