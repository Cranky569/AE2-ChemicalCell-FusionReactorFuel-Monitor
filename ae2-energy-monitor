local bridge = peripheral.find("me_bridge")
local monitor = peripheral.find("monitor")

if not bridge then error("No ME-Bridge found!") end
if not monitor then error("No monitor found!") end

-- Liste der Chemikalien, die angezeigt werden sollen
local chemicalsToShow = {
    "mekanismgenerators:tritium",
    "mekanismgenerators:deuterium",
    "mekanismgenerators:fusion_fuel"
}

local function displayChemicals()
    monitor.clear()
    monitor.setCursorPos(1,1)
    monitor.setTextColor(colors.purple)
    monitor.write("Chemical Monitor")

    local chemicals = bridge.getChemicals()
    if not chemicals or #chemicals == 0 then
        monitor.setCursorPos(1,2)
        monitor.setTextColor(colors.white)
        monitor.write("No chemicals found.")
    else
        local line = 2
        monitor.setTextColor(colors.white)
        for _, cName in ipairs(chemicalsToShow) do
            local found = false
            for _, c in ipairs(chemicals) do
                if c.name == cName then
                    monitor.setCursorPos(1,line)
                    monitor.write(string.format("%s: %d mB", c.name, tonumber(c.amount) or 0))
                    line = line + 1
                    found = true
                    break
                end
            end
            -- Falls die Chemikalie nicht gefunden wurde, trotzdem anzeigen mit 0 mB
            if not found then
                monitor.setCursorPos(1,line)
                monitor.write(string.format("%s: 0 mB", cName))
                line = line + 1
            end
        end
    end
end

while true do
    displayChemicals()
    sleep(5)
end
