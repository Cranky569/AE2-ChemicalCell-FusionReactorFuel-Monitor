-- Peripherals
local mon = peripheral.find("monitor")
local me  = peripheral.find("meBridge") or peripheral.find("me_bridge")

-- Monitor Setup
mon.setTextScale(0.5)
mon.clear()

-- Max Bytes einer 256M Chemical Storage Cell
local maxBytes = 268435456 -- 256M

-- Chemikalien mit richtigen Registry-Namen
local tracked = {
  {name = "mekanismgenerators:tritium",     label = "Tritium"},
  {name = "mekanismgenerators:deuterium",   label = "Deuterium"},
  {name = "mekanismgenerators:fusion_fuel", label = "D-T Fuel"}
}

while true do
  mon.clear()
  mon.setCursorPos(1,1)
  mon.write("Chemical Storage Overview")

  -- Liste aller Chemical Cells im AE2-System
  local chemicals = me.getTotalChemicalStorage()

  local row = 3
  for _,chem in ipairs(tracked) do
    local amount = 0
    for _,c in pairs(chemicals) do
      if c.name == chem.name then
        amount = c.amount
      end
    end

    mon.setCursorPos(1,row)
    local line = string.format("%s: %d / %d Bytes", chem.label, amount, maxBytes)
    mon.write(line)
    row = row + 1
  end

  sleep(2)
end
